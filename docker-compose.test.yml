services:
    projectnext:
        extends:
            file: docker-compose.base.yml
            service: projectnext
        build:
            target: test
        tty: true # Allows for colorized output
        depends_on: # Prisma container doesn't exist for tests
            db:
                condition: service_healthy
    
    db:
        extends:
            file: docker-compose.base.yml
            service: db
        ports:
            - 5432:5432
